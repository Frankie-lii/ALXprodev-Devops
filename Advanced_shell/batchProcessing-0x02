#!/bin/bash

# List of Pokémon
pokemon_list=(bulbasaur ivysaur venusaur charmander charmeleon)

# Output directory
output_dir="pokemon_data"
mkdir -p "$output_dir"

# Loop through Pokémon
for name in "${pokemon_list[@]}"; do
	  echo "Fetching data for $name..."

	    attempts=0
	      success=false

	        # Retry logic: maximum 3 attempts
		  while [ $attempts -lt 3 ]; do
			      curl -s -f "https://pokeapi.co/api/v2/pokemon/$name" -o "${output_dir}/${name}.json"
			          
			          if [ $? -eq 0 ]; then
					        echo "Saved data to ${output_dir}/${name}.json ✅"
						      success=true
						            break
							        else
									      ((attempts++))
									            echo "Attempt $attempts failed for $name. Retrying..."
										          sleep 1
											      fi
											        done

												  # Log error if all 3 attempts fail
												    if [ "$success" = false ]; then
													        echo "Failed to fetch data for $name after 3 attempts ❌" >> errors.txt
														  fi

														    sleep 1
													    done

